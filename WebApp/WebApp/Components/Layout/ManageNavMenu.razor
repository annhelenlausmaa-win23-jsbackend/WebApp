@attribute [StreamRendering]

@if (user == null)
{
    <p>Loading...</p>
} 
else
{
    <img src="/images/avatar.svg" alt="" class="profile-img" />
    <h5 class="h5">@user.FirstName @user.LastName</h5>
    <p class="text-m">@user.Email</p>
    <nav class="aside-button-wrapper">
        <NavLink class="btn-transparent aside-button" href="account/details" Match="NavLinkMatch.All"><i class="fa-regular fa-gear"></i> Account Details</NavLink>
        <NavLink class="btn-transparent aside-button" href="account/security"><i class="fa-regular fa-lock"></i> Security</NavLink>
        <NavLink class="btn-transparent aside-button" href="account/savedcourses"><i class="fa-regular fa-bookmark"></i> Saved Courses</NavLink>
        <NavLink class="btn-transparent aside-button" href="account/signout"><i class="fa-solid fa-arrow-right-from-bracket"></i> Sign Out</NavLink>
    </nav>  
}



@code {
    private ApplicationUser user = default!;

    [CascadingParameter]
    private HttpContext HttpContext { get; set; } = default!;

    protected override async Task OnInitializedAsync()
    {
        user = await UserManager.GetUserAsync(HttpContext.User) ?? null!;
    }
}
